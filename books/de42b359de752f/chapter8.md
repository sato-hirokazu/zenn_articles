---
title: "第8章: AWSのWAF"
---

# WAF
まず、AWS WAF っていうのは、ウェブサイトを守ってくれる頼もしい味方だよ。😊
悪い人たちが、ウェブサイトを攻撃しようとしても、WAF がそれを見つけて、ブロックしてくれるんだ。
例えるなら、ウェブサイトの入り口に立っている、強い門番さんみたいなものかな。
次に、Amazon Cognito は、ウェブサイトにログインする時に使うサービスなんだ。
ユーザーの名前やパスワードを安全に管理してくれるから、ウェブサイトを作る側も、ユーザーの情報を守るのが簡単になるんだよ。
学校の生徒手帳みたいなものだと思えばいいかな。
AWS KMS は、大事なデータを暗号化して守ってくれるサービスなんだ。
暗号化っていうのは、データをあやふやにして、他の人から見えないようにすることなんだよ。
KMS を使えば、その暗号化に使う鍵を、安全に管理することができるんだ。
宝箱に入った宝物を、南京錠でがっちり守るみたいなイメージだね。
AWS Shield は、ウェブサイトを DDoS 攻撃っていう、たくさんの攻撃から守ってくれるんだ。
DDoS 攻撃っていうのは、たくさんの悪い人たちが一緒にウェブサイトに攻撃をしかけることなんだけど、Shield がそれを防いでくれるんだよ。
ウェブサイトのお城に立ちはだかる、大きな盾みたいなものだね。
最後に AWS Certificate Manager は、ウェブサイトを安全に保つための、SSL/TLS 証明書っていうものを、簡単に管理できるサービスなんだ。
SSL/TLS 証明書っていうのは、ウェブサイトが安全だということを証明する、お墨付きみたいなものなんだよ。
Certificate Manager を使えば、そのお墨付きを簡単に取得・更新できるから、ウェブサイトの安全性を保つのが楽になるんだ。

ウェブアプリケーションを様々な脅威から守るための強力なツール！

AWS WAF (Web Application Firewall) は、ウェブアプリケーションを攻撃から保護するサービス です。WAF は、SQL インジェクション、クロスサイトスクリプティング（XSS）、ファイルインクルージョン などの一般的な攻撃を検知し、ブロックすることができます。🚀

この章では、WAF の基本的な概念から、様々なルール、そして WAF を活用したセキュリティ強化の例まで、わかりやすく解説していきます。😊

10.1 AWS WAF とは？
AWS WAF は、ウェブアプリケーションを攻撃から保護するサービス です。

WAF は、ウェブアプリケーションへのリクエストを検査 し、悪意のあるリクエストをブロック します。

WAF のメリット:

セキュリティ強化: ウェブアプリケーションを攻撃から保護することができます。
コンプライアンス: セキュリティに関する規制に準拠することができます。
パフォーマンス向上: WAF は、ウェブアプリケーションのパフォーマンスに影響を与えません。
管理の容易さ: WAF は、簡単に設定できます。
10.2 WAF の構成要素
WAF は、以下の構成要素から成り立っています。

Web ACL: WAF のルールを定義するものです。
ルール: 特定の攻撃を検知し、ブロックするルールです。
ステージ: Web ACL をデプロイする場所です。
10.3 地理的な一致条件とは？
地理的な一致条件は、特定の地域からのリクエストをブロック するためのルールです。

地理的な一致条件を使用することで、特定の国や地域からのアクセスを制限 することができます。

地理的な一致条件の例:

特定の国からのアクセスをブロックする。
特定の地域からのアクセスを許可する。
10.4 Web ACL とは？
Web ACL は、WAF のルールを定義する ものです。

Web ACL は、複数のルール を含むことができ、様々な攻撃からウェブアプリケーションを保護 します。

Web ACL の例:

SQL インジェクション攻撃をブロックするルール。
クロスサイトスクリプティング（XSS）攻撃をブロックするルール。
ファイルインクルージョン攻撃をブロックするルール。
10.5 ステージとは？
ステージは、Web ACL をデプロイする場所 です。

ステージには、CloudFront ステージ と AWS Application Load Balancer ステージ の2種類があります。

ステージのメリット:

柔軟なデプロイ: 異なるステージに、異なる Web ACL をデプロイすることができます。
テスト: 新しい Web ACL をデプロイする前に、テスト環境でテストすることができます。
10.6 Amazon Cognito とは？
Amazon Cognito は、ユーザー認証とユーザーデータの管理を行うサービス です。

Cognito を使用することで、独自のユーザー認証システム を構築する手間を省き、ユーザーデータを安全に管理 することができます。

Cognito のメリット:

簡単設定: 簡単にユーザー認証システムを構築できます。
スケーラビリティ: Cognito は、大規模なユーザーベースに対応できます。
セキュリティ: Cognito は、ユーザーデータを安全に管理します。
コンプライアンス: セキュリティに関する規制に準拠することができます。
10.7 Cognito の構成要素
Cognito は、以下の構成要素から成り立っています。

ID プール: ユーザーを認証するためのプールです。
ユーザープール: ユーザーのアカウントを管理するためのプールです。
10.8 ID プールとは？
ID プールは、ユーザーを認証するためのプール です。

ID プールは、Amazon Cognito Identity と呼ばれるサービスを使用して、ユーザーを認証 します。

ID プールのメリット:

認証の簡素化: ユーザーを簡単に認証できます。
複数認証: 様々な方法でユーザーを認証できます。
アクセス制御: 特定のユーザーに、特定のリソースへのアクセス権限を与えることができます。
10.9 ユーザープールとは？
ユーザープールは、ユーザーのアカウントを管理するためのプール です。

ユーザープールは、Amazon Cognito User Pools と呼ばれるサービスを使用して、ユーザーのアカウントを作成、管理、認証 します。

ユーザープールのメリット:

ユーザー管理: ユーザーのアカウントを作成、管理できます。
認証: ユーザーを認証できます。
アクセス制御: 特定のユーザーに、特定のリソースへのアクセス権限を与えることができます。
10.10 AWS KMS とは？
AWS KMS（Key Management Service）は、暗号化キーを管理するサービス です。

KMS を使用することで、暗号化キーを安全に管理 し、様々なサービスで暗号化キーを使用 することができます。

KMS のメリット:

キー管理: 暗号化キーを安全に管理できます。
キーローテーション: 暗号化キーを定期的にローテーションできます。
アクセス制御: 暗号化キーへのアクセスを制御できます。
セキュリティ強化: 暗号化キーを保護することで、セキュリティを強化できます。
10.11 キーローテーションとは？
キーローテーションは、暗号化キーを定期的に更新するプロセス です。

キーローテーションを使用することで、セキュリティリスク を軽減できます。

キーローテーションのメリット:

セキュリティ強化: 暗号化キーが漏洩した場合でも、影響を最小限に抑えることができます。
コンプライアンス: セキュリティに関する規制に準拠できます。
10.12 キーマテリアルとは？
キーマテリアルは、暗号化キーの実際のデータ です。

キーマテリアルは、KMS によって管理され、安全に保管されます。

10.13 サーバーサイド暗号化とは？
サーバーサイド暗号化は、AWS サービスがデータを暗号化 する方法です。

サーバーサイド暗号化は、Amazon S3、Amazon RDS などの AWS サービスで、データの暗号化に使用されます。

サーバーサイド暗号化のメリット:

セキュリティ強化: データが暗号化されるため、セキュリティを強化できます。
コンプライアンス: データプライバシーに関する規制に準拠できます。
10.14 クライアントサイド暗号化とは？
クライアントサイド暗号化は、クライアントがデータを暗号化 する方法です。

クライアントサイド暗号化は、アプリケーション で、データの暗号化に使用されます。

クライアントサイド暗号化のメリット:

セキュリティ強化: データが暗号化されるため、セキュリティを強化できます。
コンプライアンス: データプライバシーに関する規制に準拠できます。
10.15 AWS Shield とは？
AWS Shield は、DDoS（Distributed Denial of Service）攻撃から、ウェブアプリケーションを保護するサービス です。

Shield は、Amazon CloudFront と Amazon Route 53 を使用して、DDoS 攻撃を検知 し、攻撃を防御 します。

Shield の種類:

Standard: すべての AWS アカウントで、無料で使用できるサービスです。
Advanced: より高度な DDoS 防御機能を提供するサービスです。
Shield のメリット:

セキュリティ強化: DDoS 攻撃からウェブアプリケーションを保護することができます。
可用性: DDoS 攻撃によってサービスが停止するのを防ぐことができます。
10.16 IAM Identity Center とは？
IAM Identity Center は、ユーザーを AWS に認証するためのサービス です。

IAM Identity Center は、様々な ID プロバイダー (IdP) と連携することで、ユーザーを AWS にシングルサインオン (SSO) できます。

IAM Identity Center のメリット:

シングルサインオン: ユーザーは、複数の AWS サービスに、1 つのアカウントでログインできます。
セキュリティ強化: ユーザーの認証情報を、安全に管理できます。
管理の容易さ: ユーザーの認証情報を、簡単に管理できます。
10.17 IdP (ID プロバイダー) と SP (サービスプロバイダー) とは？
IdP (ID プロバイダー) は、ユーザーの認証情報 を管理するシステムです。

SP (サービスプロバイダー) は、ユーザーの認証情報 を受け取り、アクセス権限を付与する システムです。

IAM Identity Center は、SP として機能し、様々な IdP と連携して、ユーザーを認証します。

IdP の例:

Azure Active Directory
Google Workspace
Okta
10.18 AWS Certificate Manager とは？
AWS Certificate Manager は、SSL/TLS 証明書を管理するサービス です。

Certificate Manager を使用することで、簡単に SSL/TLS 証明書を取得、管理、更新 できます。

Certificate Manager のメリット:

簡単設定: 簡単に SSL/TLS 証明書を取得、管理、更新できます。
セキュリティ強化: SSL/TLS 証明書を使用することで、ウェブサイトのセキュリティを強化できます。
コスト削減: Certificate Manager は、無料で使用できます。
10.19 まとめ
本章では、AWS WAF、Cognito、KMS、Shield、IAM Identity Center、Certificate Manager など、セキュリティ関連のサービスについて学びました。これらのサービスを適切に組み合わせることで、AWS 上で安全でセキュアなシステムを構築できます。

今後の学習:

AWS 上で実際に WAF、Cognito、KMS、Shield、IAM Identity Center、Certificate Manager を設定してみましょう。
各サービスの様々な機能を理解しましょう。
セキュリティに関するベストプラクティスを学びましょう。
セキュリティ関連の認定資格を取得しましょう。